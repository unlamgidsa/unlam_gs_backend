{% extends 'base.html' %}
{% block content %}
{% load leaflet_tags %}
{% load staticfiles %}

<h1>Ground Track  (Satellite: {{satellite.code}} ) </h1>

<html>
<head>
	<!-- <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css">  -->
    {% block head %}
    	{% leaflet_js %}
    	{% leaflet_css %}
    {% endblock %}
    
    <link 
        rel="stylesheet" 
        href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css"
    />
	<style>
		body {
            padding: 0;
            margin: 0;
        }
        html, body, #map {
            height: 400px;
            width: 100%;
        }
	</style>
</head>
<form method='GET' action=''>
	<div class="breadcrumbs">
	    Satellite: 
	    <select id="tbsatellite" name='tbsatellite'>
			{% for s in sat_list %}
		   		<option value="{{s.pk}}"
		       		{% if s.pk == current_sat_id %}selected="selected"{% endif %}>
		       		{{s.code|capfirst}}
		   		</option>
		  	{% endfor %}
		</select>
	
	    from: <input type="datetime-local" value='{{request.GET.tbdesde}}' name='tbdesde'/>
	    to: <input type="datetime-local" value='{{request.GET.tbhasta}}' name='tbhasta'/>
	    <input type="submit" name="submit" value="Procesar!"/>
	   <!--  <h1> <input type="submit" name="descargar" value="Descargar"/> </h1> --> 
    </div>              
    
</form>
<body>
    {% leaflet_map "map" callback="mapInit" %}
    <footer>
        <p>&copy; 2017 GroundSegment</p>
    </footer>

    {% block script %}
        <script type="text/javascript">
            function mapInit(map, options) {	
	  
                L.tileLayer('https://api.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token={{ mapbox_key }}', {
	                attribution: '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
	            }).addTo(map);
            	
                
                map.setZoom(2);
            	
	            //L.control.scale(100).addTo(map);
	            //map.setView([0.0, 0.0],2.5);
	            var marker = L.marker([- 31.52, - 64.46]).addTo(map);
	    
	            marker.bindPopup("<b>ETC</b>").openPopup();
	            {% for p in object_list %}
		        var circle = L.circle([{{p.0}}, {{p.1}}], {
		            color: 'green',
		            fillColor: '#f03',
		            fillOpacity: 0.5,
		            radius: 6
		        }).addTo(map);	
		        {% endfor %}
	        };

    	</script>
    {% endblock %}
    

</body>
</html>
{% endblock %}
